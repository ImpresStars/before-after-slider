<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Before/After Slider</title>
  <style>
    html, body {
      margin: 0; padding: 0;
      width: 100%; height: 100%;
      overflow: hidden;
      background: #222;
    }
    #container {
      position: relative;
      width: 100%; height: 100%;
      overflow: hidden;
    }
    #before {
      position: absolute; left: 0; top: 0;
      width: 100%; height: 100%;
      object-fit: cover;
      z-index: 1;
    }
    #after-wrap {
      position: absolute; left: 0; top: 0;
      width: 50%; height: 100%;
      overflow: hidden;
      z-index: 2;
      pointer-events: none;
      transition: width 0.2s;
    }
    #after {
      width: 100%; height: 100%;
      object-fit: cover;
      position: absolute; left: 0; top: 0;
      z-index: 2;
    }
    #slider {
      position: absolute;
      left: 0; bottom: 32px;
      width: 100%;
      z-index: 3;
      pointer-events: all;
      appearance: none;
      height: 16px;
      background: transparent;
      outline: none;
    }
    #slider::-webkit-slider-runnable-track {
      height: 4px;
      background: #FF5F42;
      border-radius: 2px;
    }
    #slider::-webkit-slider-thumb {
      appearance: none;
      width: 32px; height: 32px;
      border-radius: 50%;
      background: #fff;
      border: 4px solid #FF5F42;
      margin-top: -14px;
      cursor: pointer;
      box-shadow: 0 4px 18px #FF5F4244;
      animation: wiggle 1.2s infinite;
    }
    @keyframes wiggle {
      0%   { transform: translateY(0); }
      10%  { transform: translateY(-8px) rotate(-8deg); }
      20%  { transform: translateY(8px) rotate(8deg); }
      30%  { transform: translateY(-8px) rotate(-5deg);}
      40%  { transform: translateY(8px) rotate(5deg);}
      50%  { transform: translateY(0) rotate(0);}
      100% { transform: translateY(0) rotate(0);}
    }
    #slider:focus { outline: none; }
    .label {
      position: absolute;
      top: 18px;
      font-family: sans-serif;
      font-size: 1.1em;
      font-weight: bold;
      background: rgba(0,0,0,0.33);
      color: #fff;
      padding: 3px 14px;
      border-radius: 8px;
      z-index: 4;
      pointer-events: none;
      user-select: none;
      text-shadow: 0 1px 4px rgba(0,0,0,0.6);
    }
    .label.left { left: 18px;}
    .label.right { right: 18px;}
    @media (max-width: 600px) {
      #slider { height: 12px; }
      #slider::-webkit-slider-thumb { width: 24px; height: 24px; margin-top: -10px;}
      .label { font-size: 0.9em; top: 6px; padding: 2px 7px; }
      .label.left { left: 4px;}
      .label.right { right: 4px;}
    }
  </style>
</head>
<body>
  <div id="container">
    <img id="before" src="" alt="Before"/>
    <div id="after-wrap">
      <img id="after" src="" alt="After"/>
    </div>
    <span class="label left" id="label-left"></span>
    <span class="label right" id="label-right"></span>
    <input type="range" min="0" max="100" value="50" id="slider"/>
  </div>
  <script>
    // Parse URL params
    function getParam(name, def) {
      const url = new URL(window.location);
      let v = url.searchParams.get(name);
      return (v === null || v === undefined || v === '') ? def : v;
    }

    // Set images and labels
    const beforeImg = getParam('before', '');
    const afterImg = getParam('after', '');
    const labelLeft = getParam('label1', '');
    const labelRight = getParam('label2', '');

    document.getElementById('before').src = beforeImg;
    document.getElementById('after').src = afterImg;
    document.getElementById('label-left').textContent = labelLeft;
    document.getElementById('label-left').style.display = labelLeft ? '' : 'none';
    document.getElementById('label-right').textContent = labelRight;
    document.getElementById('label-right').style.display = labelRight ? '' : 'none';

    // Responsive slider logic
    const slider = document.getElementById('slider');
    const afterWrap = document.getElementById('after-wrap');
    function setAfterWidth(percent) {
      afterWrap.style.width = percent + '%';
    }
    slider.addEventListener('input', function() {
      setAfterWidth(this.value);
    });
    // Initial position
    setAfterWidth(slider.value);
  </script>
</body>
</html>
